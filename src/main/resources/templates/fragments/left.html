<div th:fragment="leftFragment">
  <!-- âœ… ì‚¬ì´ë“œë°” -->
  <nav id="left" class="sidebar closed">
    <ul>
      <li><a href="/pages/main/base"><i class="fas fa-home"></i><span>í™ˆ</span></a></li>

      <li class="has-submenu">
        <a href="#" class="submenu-toggle"><i class="fas fa-file-alt"></i><span>ë¦¬í¬íŠ¸ ê´€ë¦¬</span></a>
        <ul class="submenu">
          <li><a href="/pages/p01/p01a04/p01a04List">ë¦¬í¬íŠ¸ ëª©ë¡</a></li>
          <li class="has-submenu">
            <a href="#" class="submenu-toggle">ë¦¬í¬íŠ¸ í†µê³„</a>
            <ul class="submenu">
              <li><a href="#">ì¼ë³„ í†µê³„</a></li>
              <li class="has-submenu">
                <a href="#" class="submenu-toggle">ì›”ë³„ í†µê³„</a>
                <ul class="submenu">
                  <li><a href="#">1ì›”</a></li>
                  <li><a href="#">2ì›”</a></li>
                  <li class="has-submenu">
                    <a href="#" class="submenu-toggle">ìƒì„¸ í†µê³„</a>
                    <ul class="submenu">
                      <li><a href="#">ë¶€ì„œë³„</a></li>
                      <li><a href="#">ê°œì¸ë³„</a></li>
                    </ul>
                  </li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>
      </li>


		<li class="has-submenu">
		    <a href="#"><i class="fas fa-chart-line"></i><span>ì£¼ì‹ ê´€ë¦¬</span></a>
		    <ul class="submenu">
		        <!-- ê¸°ì¡´ ìœ ì‚¬ ì¢…ëª© ì°¨íŠ¸ -->
		        <li><a href="/pages/stock/krx_list">ì¢…ëª© ë¦¬ìŠ¤íŠ¸</a></li>
		        <li><a href="/pages/stock/stock01">ìœ ì‚¬ ì¢…ëª© ì°¨íŠ¸</a></li>
				<li><a href="/pages/stock/similar-advanced">ìœ ì‚¬ ì¢…ëª© ì°¨íŠ¸ë¦¬ì–¼</a></li>
		
		        <!-- í…ŒìŠ¤íŠ¸ í™”ë©´ ì¶”ê°€ -->
		        <li><a href="/pages/stock/stock_test1">í…ŒìŠ¤íŠ¸ í™”ë©´ 1</a></li>
		        <li><a href="/pages/stock/stock_test2">í…ŒìŠ¤íŠ¸ í™”ë©´ 2</a></li>
		        <li><a href="/pages/stock/stock_test3">í…ŒìŠ¤íŠ¸ í™”ë©´ 3</a></li>
		
		        <!-- ì£¼ì‹ ë¦¬í¬íŠ¸ ê¸°ì¡´ ë©”ë‰´ -->
		        <li class="has-submenu">
		            <a href="#" class="submenu-toggle">ì£¼ì‹ ë¦¬í¬íŠ¸</a>
		            <ul class="submenu">
		                <li><a href="/pages/stocks/report/daily">ì¼ë³„ ë¦¬í¬íŠ¸</a></li>
		                <li><a href="/pages/stocks/report/monthly">ì›”ë³„ ë¦¬í¬íŠ¸</a></li>
		                <li class="has-submenu">
		                    <a href="#" class="submenu-toggle">ìƒì„¸ ë¦¬í¬íŠ¸</a>
		                    <ul class="submenu">
		                        <li><a href="/pages/stocks/report/sector">ì„¹í„°ë³„</a></li>
		                        <li><a href="/pages/stocks/report/individual">ê°œë³„ ì¢…ëª©</a></li>
		                    </ul>
		                </li>
		            </ul>
		        </li>
		        <li><a href="/pages/stocks/history">ê±°ë˜ ë‚´ì—­</a></li>
		    </ul>
		</li>

	  
	  

      <li class="has-submenu">
        <a href="#" class="submenu-toggle"><i class="fas fa-cog"></i><span>ì„¤ì •</span></a>
        <ul class="submenu">
          <li><a href="/pages/sy/syusr/syusr01List">ì‚¬ìš©ì ê´€ë¦¬</a></li>
          <li><a href="#">ê¶Œí•œ ì„¤ì •</a></li>
        </ul>
      </li>
    </ul>
  </nav>

  <!-- âœ… ì˜¤ë²„ë ˆì´ -->
  <div id="sidebarOverlay"></div>

  <style>
    .sidebar {
      position: fixed;
      top: 50px;
      left: 0;
      width: 240px;
      height: calc(100% - 50px);
      background: #f3f4f6;
      border-right: 1px solid #d1d5db;
      overflow-y: auto;
      transform: translateX(-240px);
      transition: transform 0.3s ease;
      z-index: 3000;
    }
    .sidebar.open { transform: translateX(0); }

    #sidebarOverlay {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0, 0, 0, 0.35);
      z-index: 2500;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    #sidebarOverlay.active {
      display: block; opacity: 1;
    }

    .sidebar ul { list-style: none; margin: 0; padding: 0; }
    .sidebar li { border-bottom: 1px solid #e5e7eb; }
    .sidebar li a {
      display: flex; align-items: center; gap: 10px;
      padding: 12px 18px;
      color: #374151; text-decoration: none;
      transition: background 0.2s, color 0.2s;
    }
    .sidebar li a:hover { background: #e5e7eb; color: #111827; }

    .has-submenu > a::after {
      content: "â–¾";
      margin-left: auto;
      font-size: 0.8rem;
      transition: transform 0.2s ease;
    }
    .has-submenu.open > a::after {
      transform: rotate(180deg);
    }

    .submenu { display: none; background: #e5e7eb; }
    .has-submenu.open > .submenu { display: block; }

    /* ë‹¨ê³„ë³„ ë“¤ì—¬ì“°ê¸° */
    .submenu a { padding-left: 30px; background: #e6e9f0; }
    .submenu .submenu a { padding-left: 45px; background: #e3e5ec; }
    .submenu .submenu .submenu a { padding-left: 60px; background: #dee1e8; }
    .submenu .submenu .submenu .submenu a { padding-left: 75px; background: #d9dce4; }
  </style>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const sidebar = document.querySelector(".sidebar");
      const overlay = document.getElementById("sidebarOverlay");

      // âœ… ì „ì—­ í† ê¸€ í•¨ìˆ˜ (top.htmlì—ì„œ í˜¸ì¶œ)
      window.toggleSidebar = function () {
        const isOpen = sidebar.classList.contains("open");
        sidebar.classList.toggle("open", !isOpen);
        overlay.classList.toggle("active", !isOpen);
      };

      // âœ… ì˜¤ë²„ë ˆì´ í´ë¦­ ì‹œ ë‹«ê¸°
      overlay.addEventListener("click", () => {
        sidebar.classList.remove("open");
        overlay.classList.remove("active");
      });

      // âœ… ëª¨ë“  a íƒœê·¸ ì²˜ë¦¬ (í•˜ìœ„ ë©”ë‰´ ì—¬ë¶€ì— ë”°ë¼ ë‹¤ë¥´ê²Œ)
      document.querySelectorAll(".sidebar li > a").forEach(link => {
        link.addEventListener("click", e => {
          const parentLi = link.parentElement;
          const hasSubmenu = parentLi.classList.contains("has-submenu");
          const submenu = parentLi.querySelector(":scope > .submenu");

          if (hasSubmenu && submenu) {
            // ğŸ‘‰ í•˜ìœ„ ë©”ë‰´ê°€ ìˆìœ¼ë©´ í¼ì¹˜ê¸°/ë‹«ê¸°ë§Œ
            e.preventDefault();
            e.stopPropagation();
            parentLi.classList.toggle("open");
          } else {
            // ğŸ‘‰ ì‹¤ì œ í˜ì´ì§€ ì´ë™ ë§í¬ë©´ ê·¸ëŒ€ë¡œ ì´ë™
            // (ì—¬ê¸°ì„  ë”°ë¡œ ë§‰ì§€ ì•ŠìŒ, href ë™ì‘ ê·¸ëŒ€ë¡œ)
            // í•„ìš” ì‹œ ëª¨ë°”ì¼ ì „ìš© ìë™ ë‹«ê¸° ì¡°ê±´ ê°€ëŠ¥:
            // if (window.innerWidth < 768) {
            //   sidebar.classList.remove("open");
            //   overlay.classList.remove("active");
            // }
          }
        });
      });
    });
  </script>
</div>
