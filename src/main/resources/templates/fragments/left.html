<div th:fragment="leftFragment">
  <nav id="left" class="sidebar closed">
    <ul>
      <li><a href="/pages/main/base"><i class="fas fa-home"></i><span>홈</span></a></li>
      <li class="has-submenu">
        <a href="#" class="submenu-toggle"><i class="fas fa-file-alt"></i><span>리포트 관리</span></a>
        <ul class="submenu">
          <li><a href="/pages/p01/p01a05/p01a05List">리포트 목록</a></li>
          <li class="has-submenu">
            <a href="#" class="submenu-toggle">리포트 통계</a>
            <ul class="submenu">
              <li><a href="#">일별 통계</a></li>
              <li class="has-submenu">
                <a href="#" class="submenu-toggle">월별 통계</a>
                <ul class="submenu">
                  <li><a href="#">1월</a></li>
                  <li><a href="#">2월</a></li>
                  <li class="has-submenu">
                    <a href="#" class="submenu-toggle">상세 통계</a>
                    <ul class="submenu">
                      <li><a href="#">부서별</a></li>
                      <li><a href="#">개인별</a></li>
                    </ul>
                  </li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>
      </li>
      
      <li class="has-submenu">
	    <a href="#"><i class="fas fa-chart-line"></i><span>Job</span></a>
	    <ul class="submenu">
	      <li><a href="/pages/stock/stockBatch">Stock Batch</a></li>
	    </ul>
	  </li>
	  
	  <li class="has-submenu">
	    <a href="#"><i class="fas fa-chart-line"></i><span>stock</span></a>
	    <ul class="submenu">
	    	  <li><a href="/pages/stock/stockList">종목 리스트</a></li>
	      <li><a href="/pages/stock/chart_lastCloseDownward">계단하락 종목 차트</a></li>
	       <li><a href="/pages/stock/chart_pattern">chart_pattern 리스트</a></li>
	    </ul>
	  </li>

      <li class="has-submenu">
        <a href="#"><i class="fas fa-chart-line"></i><span>주식 관리</span></a>
        <ul class="submenu">
          <li><a href="/pages/stock/krx_list">종목 리스트</a></li>
          <li><a href="/pages/stock/similar-advanced">유사 종목 차트 리얼</a></li>
          <li><a href="/pages/stock/similar-advanced-new">유사 종목 차트 리얼 new</a></li>
          <li><a href="/pages/stock/lastCloseDownward">계단하락 종목 차트</a></li>
          
          <li class="has-submenu">
            <a href="#" class="submenu-toggle">주식 리포트</a>
            <ul class="submenu">
              <li><a href="/pages/stocks/report/daily">일별 리포트</a></li>
              <li><a href="/pages/stocks/report/monthly">월별 리포트</a></li>
              <li class="has-submenu">
                <a href="#" class="submenu-toggle">상세 리포트</a>
                <ul class="submenu">
                  <li><a href="/pages/stocks/report/sector">섹터별</a></li>
                  <li><a href="/pages/stocks/report/individual">개별 종목</a></li>
                </ul>
              </li>
            </ul>
          </li>
          <li><a href="/pages/stocks/history">거래 내역</a></li>
        </ul>
      </li>

      <li class="has-submenu">
        <a href="#" class="submenu-toggle"><i class="fas fa-cog"></i><span>설정</span></a>
        <ul class="submenu">
          <li><a href="/pages/sy/syusr/syusr01List">사용자 관리</a></li>
          <li><a href="#">권한 설정</a></li>
        </ul>
      </li>
    </ul>
  </nav>
  <div id="sidebarOverlay"></div>

  <style>
    .sidebar { position:fixed; top:50px; left:0; width:240px; height:calc(100%-50px); background:#f3f4f6; border-right:1px solid #d1d5db; overflow-y:auto; transform:translateX(-240px); transition:transform 0.3s ease; z-index:3000; }
    .sidebar.open{ transform:translateX(0); }
    #sidebarOverlay{ display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.35); z-index:2500; opacity:0; transition:opacity 0.3s ease; }
    #sidebarOverlay.active{ display:block; opacity:1; }
    .sidebar ul{ list-style:none; margin:0; padding:0; }
    .sidebar li{ border-bottom:1px solid #e5e7eb; }
    .sidebar li a{ display:flex; align-items:center; gap:10px; padding:12px 18px; color:#374151; text-decoration:none; transition:background 0.2s,color 0.2s; }
    .sidebar li a:hover{ background:#e5e7eb; color:#111827; }
    .has-submenu > a::after{ content:"▾"; margin-left:auto; font-size:0.8rem; transition:transform 0.2s ease; }
    .has-submenu.open > a::after{ transform:rotate(180deg); }
    .submenu{ display:none; background:#e5e7eb; }
    .has-submenu.open > .submenu{ display:block; }
    .submenu a{ padding-left:30px; background:#e6e9f0; }
    .submenu .submenu a{ padding-left:45px; background:#e3e5ec; }
    .submenu .submenu .submenu a{ padding-left:60px; background:#dee1e8; }
    .submenu .submenu .submenu .submenu a{ padding-left:75px; background:#d9dce4; }
  </style>

  <script>
    document.addEventListener("DOMContentLoaded",()=>{
      const sidebar=document.querySelector(".sidebar");
      const overlay=document.getElementById("sidebarOverlay");
      window.toggleSidebar=function(){
        const isOpen=sidebar.classList.contains("open");
        sidebar.classList.toggle("open",!isOpen);
        overlay.classList.toggle("active",!isOpen);
      };
      overlay.addEventListener("click",()=>{
        sidebar.classList.remove("open");
        overlay.classList.remove("active");
      });
      document.querySelectorAll(".sidebar li > a").forEach(link=>{
        link.addEventListener("click",e=>{
          const parentLi=link.parentElement;
          const submenu=parentLi.querySelector(":scope>.submenu");
          if(parentLi.classList.contains("has-submenu") && submenu){
            e.preventDefault();
            e.stopPropagation();
            parentLi.classList.toggle("open");
          }
        });
      });
    });
  </script>
</div>
